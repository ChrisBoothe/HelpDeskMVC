@model IEnumerable<HelpDeskMVC.Models.Ticket>

@{
    ViewBag.Title = "Index";
}

<h3>Dashboard</h3>
<br />

@Html.Raw(TempData["msg"])

<p>
    <input type="button" value="New Ticket" class="btn-success" onclick="location.href='@Url.Action("Create", "Home")'" />
</p>
<table class="table">
    <tr>
        <th>
            @Html.ActionLink("#", "Index", new { sortOrder = ViewBag.NumberSortParm})
        </th>
        <th>
            @Html.DisplayNameFor(model => model.Summary)
        </th>
        <th>
            @Html.ActionLink("Creator", "Index", new { sortOrder = ViewBag.CreatorSortParm })
        </th>
        <th>
            @Html.ActionLink("Priority", "Index", new { sortOrder = ViewBag.PrioritySortParm })
        </th>
        <th>
            @Html.ActionLink("Closed Date", "Index", new { sortOrder = ViewBag.DateSortParm })
        </th>
        <th></th>
    </tr>

    @foreach (var item in Model)
    {
        using (Html.BeginForm("Close", "Home", new { id = item.TicketGuid }))
        {
            @Html.AntiForgeryToken()
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.TicketNumber)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Summary)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Creator)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.TicketPriority)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.ClosedDate)
                </td>
                <td>
                    <input type="button" value="Details" class="btn-default" onclick="location.href='@Url.Action("Details", "Home", new {id = item.TicketGuid })'" />
                    <input type="submit" value="Close" class="btn-primary"/>
                </td>
            </tr>
        }
    }
</table>
